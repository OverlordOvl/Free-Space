#:kivy 2.0.0
<SM>:
    Main:
        id: Main
        name: "Main"
    Login:
        id: Login
        name: "Login"
    Registration:
        id: Registration
        name: "Registration"
    SelectServer:
        id: SelectServer
        name: "SelectServer"


<MainScreenBackBtn@AnchorLayout>:
    padding: 15, 10, 0, 0
    anchor_x: "left"
    anchor_y: "top"
    MDRaisedButton:
        text: "Back"
        on_press:
            self.parent.parent.manager.current = "Main"


<SelectServer>:

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        size: root.size

        MDGridLayout:
            id: content
            cols: 1
            spacing: dp(10)
            pos_hint_x: .5
			size_hint_x: .65
            adaptive_height: True

            MDLabel:
                halign: 'center'
                text: "[b]Welcome to Free Space[/b]"
                font_size: dp(20)
                markup: True
                color: app.theme_cls.primary_color
                adaptive_height: True

            MDLabel:
                halign: 'center'
                text: "To continue, you need an invite code. If you don't know what it is, visit our [/i][u][b][ref=github][color=bba7ea]github[/color][/ref][/b][/u] page."
                color: app.theme_cls.primary_color
                markup: True
                font_size: dp(16)
                adaptive_height: True

                on_ref_press:
                    app.open_github()

            MDLabel:
                halign: 'center'
                text: "There is detailed information about the project"
                color: app.theme_cls.primary_color
                font_size: dp(16)
                adaptive_height: True

            BoxLayout:
                orientation: "vertical"
                size_hint: [.5, None]

                MDTextField:
                    id: invite_code
                    hint_text: "Invite code"
                    helper_text: "Please, enter your invite code"
                    size_hint_x: .65
                    required: True
                    helper_text_mode: "on_focus"
                    write_tab: False
                    adaptive_height: True

                MDTextField:
                    id: decrypter_code
                    hint_text: "Decrypter code"
                    helper_text: "Please, enter decrypter code."
                    size_hint_x: .65
                    required: True
                    helper_text_mode: "on_focus"
                    write_tab: False
                    adaptive_height: True

                MDRoundFlatButton:
                    id: start
                    text: "Начнём!"
                    font_name: 'Roboto'
                    pos_hint_x: .5
                    size_hint_x: .65
                    theme_text_color: "Custom"
                    text_color: app.theme_cls.primary_color
                    size_hint: [.5, None]
                    on_release:
                        root.set_invite_code()


<Main>:
    size:(root.width,root.height)

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'

        BoxLayout:
            spacing: dp(5)
            size_hint:(.5, None)
            orientation: 'horizontal'

            BoxLayout:
                orientation: 'vertical'
                spacing: 10
                size_hint:(1, None)
                size:(root.width, dp(100))

                MDRoundFlatButton:
                    font_size: dp(16)
                    opposite_colors: True
                    size_hint: (1, 1)
                    text: "Login"
                    on_press:
                        root.manager.current = 'Login'

                MDRoundFlatButton:
                    font_size: dp(16)
                    opposite_colors: True
                    size_hint: (1, 1)
                    text: "Registration"
                    on_press:
                        root.manager.current = 'Registration'


<Login>:
    MainScreenBackBtn
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "center"

        BoxLayout:
            size_hint: [0.6, None]
            orientation: "vertical"
            spacing: dp(10)
            MDTextField:
                id: login
                hint_text: "Your login"
                helper_text: "Please, enter your login here"
                helper_text_mode: "on_focus"
                icon_left: 'account'
                write_tab: False


            MDRelativeLayout:
                size_hint_y: None
                height: password.height
                MDTextField:
                    id: password
                    hint_text: "Your password"
                    password: True
                    password_mask: "*"
                    helper_text: "Please, enter your password here"
                    helper_text_mode: "on_focus"
                    icon_left: 'key-variant'
                    write_tab: False

                MDIconButton:
                    icon: "eye-off"
                    ripple_scale: .5
                    pos_hint: {"center_y": .6}
                    pos: password.width - self.width + dp(8), 0
                    on_release:
                        self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                        password.password = False if password.password is True else True


            MDRoundFlatButton:
                text: "Enter"
                size_hint_x: 1
                font_size: dp(16)
                on_press:
                    root.validate()


<Registration>:
    MainScreenBackBtn

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        BoxLayout:
            size_hint:(.7, None)
            orientation: 'vertical'
            spacing: 5

            MDLabel:
                text: "Create Account"
                font_size: dp(20)

            MDTextField:
                write_tab: False
                hint_text: "Username"
                helper_text_mode: "on_focus"

            MDTextField:
                write_tab: False
                hint_text: "Password"
                helper_text: "Must contain at least eight characters, include letters, numbers and special characters"
                helper_text_mode: "on_focus"
                password: True
                password_mask: "*"

            MDTextField:
                write_tab: False
                hint_text: "Repeat Password"
                helper_text: "Must contain at least eight characters, include letters, numbers and special characters"
                helper_text_mode: "on_focus"
                password: True
                password_mask: "*"
            MDRoundFlatButton:
                text: "Registration"
                size_hint: (1,None)




